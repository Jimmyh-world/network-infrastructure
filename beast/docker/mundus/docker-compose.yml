version: '3.8'

networks:
  mundus:
    driver: bridge

services:
  hello-world:
    build:
      context: /home/jimmyb/Mundus-editor-application/services/hello-world-fullstack
      dockerfile: ../../docker/services/hello-world-fullstack.Dockerfile
    container_name: mundus-hello-world
    restart: unless-stopped
    ports:
      - "8081:3000"  # Port 8081 external (Cloudflare), 3000 internal (Express)
    environment:
      - NODE_ENV=production
      - PORT=3000
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:3000/api/health"]
      interval: 30s
      timeout: 3s
      retries: 3
      start_period: 10s
    networks:
      - mundus
